[gd_scene load_steps=9 format=3 uid="uid://d1nef8k2lrrlx"]

[ext_resource type="Script" uid="uid://0ckqtfclytib" path="res://scenes/levels/level_1.gd" id="1_l37oo"]
[ext_resource type="PackedScene" uid="uid://c8fcqyfic7k4b" path="res://scenes/enemy.tscn" id="2_qpwj6"]
[ext_resource type="PackedScene" uid="uid://biwwlsdfm47i3" path="res://scenes/castle.tscn" id="3_ibugp"]
[ext_resource type="PackedScene" uid="uid://dfvua4lkimayw" path="res://scenes/menus.tscn" id="4_8qukl"]
[ext_resource type="PackedScene" uid="uid://n88y1vrsh0ri" path="res://scenes/tower.tscn" id="5_3p04p"]
[ext_resource type="Texture2D" uid="uid://wcnsnfkxtqdb" path="res://assets/forest-day.png" id="6_qpwj6"]

[sub_resource type="Curve2D" id="Curve2D_6iamk"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x42e6"]
size = Vector2(249, 517)

[node name="Level 2" type="Node" node_paths=PackedStringArray("starting_castle", "ending_castle", "enemies", "enemy_area", "path", "menus") groups=["Level"]]
script = ExtResource("1_l37oo")
title = "Level 2 - Passphrases"
description = "Our Caesar Encryption was working for quite a while, but we have been getting reports from our messengers that the enemy might be onto our little magic trick... we have to admit that this \"Caesar Encryption\" thing was a little easy to figure out. There are only 26 letters in the alphabet to guess, after all. Luckily, it looks like our genius wizard Cypher had more tricks up his sleev-- err, robe, I suppose. 

He said that he developed an upgraded version of his scheme called the \"Vigen√®re Encryption\". Instead of a single letter, apparently it uses a whole word as a secret! Surely that should keep the King's enemies at bay.

I think you should have no problem setting this scheme up, seeing how easily you handled the Caesar one. However, the King is the one that chose the secret word, and he's not telling us what it was. Although, he HAS been obsessed lately with his favorite execution method... I would not be surprised one bit if that had something to do with it."
hint = "This is a placeholder."
victory_description = "Well done! Our messages seem to be secure... at least, for now.

Thanks for playing The King's Secret! That's all we have for now. 

Press OK to return to Level 1."
fail_description = "Uh oh! The enemy has intercepted too many of our messages... 

Try again, but make sure your decryption outpost is closer to the West Tower."
starting_castle = NodePath("Castle A")
ending_castle = NodePath("Castle B")
enemies = [NodePath("Enemies/Enemy"), NodePath("Enemies/Enemy2"), NodePath("Enemies/Enemy3")]
enemy_area = NodePath("Enemy areas/CollisionShape2D")
path = NodePath("Messenger Path")
menus = NodePath("Menus")

[node name="Camera" type="Camera2D" parent="."]
anchor_mode = 0

[node name="MessengerSpawnTimer" type="Timer" parent="."]
wait_time = 2.0
autostart = true

[node name="Enemies" type="Node" parent="."]

[node name="Enemy" parent="Enemies" instance=ExtResource("2_qpwj6")]
position = Vector2(729, 225)

[node name="Enemy2" parent="Enemies" instance=ExtResource("2_qpwj6")]
position = Vector2(788, 276)

[node name="Enemy3" parent="Enemies" instance=ExtResource("2_qpwj6")]
position = Vector2(851, 330)

[node name="Castle A" parent="." instance=ExtResource("3_ibugp")]
position = Vector2(215, 515)

[node name="Castle B" parent="." instance=ExtResource("3_ibugp")]
position = Vector2(1031, 499)

[node name="Messenger Path" type="Path2D" parent="."]
curve = SubResource("Curve2D_6iamk")

[node name="Menus" parent="." instance=ExtResource("4_8qukl")]

[node name="Enemy areas" type="Node" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy areas"]
position = Vector2(820.5, 458.5)
shape = SubResource("RectangleShape2D_x42e6")

[node name="Tower" parent="." instance=ExtResource("5_3p04p")]
position = Vector2(350, 550)
type = "Vigenere Encrypt"
vigenere_key = "HANGING"
is_static = true

[node name="background" type="Sprite2D" parent="."]
z_index = -1
position = Vector2(639, 203)
scale = Vector2(0.6737951, 0.59906936)
texture = ExtResource("6_qpwj6")

[connection signal="timeout" from="MessengerSpawnTimer" to="." method="_on_messenger_spawn_timer_timeout"]
[connection signal="message_toggle" from="Menus" to="." method="_on_menus_message_toggle"]
